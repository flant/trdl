---
title: trdl.yaml
permalink: reference/trdl_yaml.html
toc: false
---

Конфигурация `trdl.yaml` содержит инструкции, которые определяют окружение и набор команд необходимый для сборки артефактов релиза. 

При релизе trdl читает `trdl.yaml` из git-тега и выполняет сборку:
- Запускает контейнер на базе выбранного docker-образа.
- Монтирует исходный код git-тега в директорию `/git`.
- Выполняет сборочные инструкции в директории `/git`.
- Сохраняет артефакты релиза из директории `/result`.

<br />

{% include reference/trdl_yaml/table.html %}

## Организация артефактов релиза

После выполнения сборочных инструкций артефакты релиза должны быть в директории `/result` и иметь определённую организацию директорий для интеграции с trdl-клиентом, доставки на различные платформы и эффективной работы с исполняемыми файлами.

Артефакты релиза необходимо сохранять в соответствующие директории платформ, для доставки на которые они рассчитаны. 
Имя директории платформы определяется операционной системой и архитектурой `<os>-<arch>`.
В случае, если разделение на операционные системы и/или архитектуры не требуется можно использовать зарезервированное имя `any`. Далее представлен список поддерж комбинаций, выстроенных по приоритету использования trdl-клиентом.

```shell
darwin-amd64
darwin-arm64
darwin-any
linux-amd64
linux-amd64
linux-any
windows-amd64
windows-any
any-any
```

Для того чтобы использовать основную функциональность trdl-клиента (к примеру, команду [trdl use](/reference/cli/trdl_use.html)), необходимо сохранять исполняемые файлы в поддиректории `bin`.

## Пример

### trdl.yaml

{% include reference/trdl_yaml/example_trdl_yaml.md.liquid %}

### build.sh

{% include reference/trdl_yaml/example_build_sh.md.liquid %}

### Директория /result после выполнения сборочных инструкций

{% include reference/trdl_yaml/example_result.md.liquid %}